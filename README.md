# AHNU座位预约脚本
> 使用Python完成图书馆自动预约座位（安徽师范大学（花津校区）敬文图书馆)
> **2023年5月10日完成。**

### 由于github上的图片显示有问题，所以操作指南放在gitee上
```angular2html
https://gitee.com/liuliuliuyuyuy/ahnulibrary-operation-guide
```

### 特别说明
1. 项目在此项目的基础上开发```  https://github.com/yangchnet/AHNUReserve  ```
2. 具体变化
> * 修改邮箱推送为微信推送
> * 增加了预约楼层，具体增加了图书馆2楼，图书馆3、4楼公共空间的座位（以前只可预约3、4楼的部分位置）
> * 修改了当该预约位置冲突时，无法预约下一个位置的BUG，本项目如果所预约位置与他人有冲突，会自动预约编号的下一个位置
> * 请注意上文的编号不是nskxxxx的编号，而是座位信息在传输中的编号，由于图书馆座位编号有些小小的混乱，所以可能会让预约位置和设置位置离得比较远，请在微信中及时查看

### 避免被发现是脚本的一些优化
1. 经过学长和同学的提醒，使用此脚本可能会造成账号被封，怎么检测的我还不太清楚
2. 我在代码的三个方面加入优化
> 1. 在定时任务启动后，程序会随机延时5~10分钟执行，这样每天的预约时间就不固定了
> 2. 在每次请求的时候会延时10~15秒，防止因为短时间内请求次数过多导致被发现是脚本
> 3. 请求头的 ``` User-Agent```参数修改为我自己通过抓包手机请求的值，模拟手机发送请求
3. 建议在使用的时候注意下面两个问题
> 1. 设置定时任务的时间不要太早，6点开始预约，你可以设置稍微晚一些，晚个十几分钟
> 2. 最好是每过一周或者一段时间就修改一次定时任务的时间，也就是修改预约座位的时间，如果你几个月都是一个时间预约就很明显是脚本

### 加了这几个优化应该是查不出来，因为我们的一切都是随机的，和人的操作一样。如果一直使用的是最新的代码还被查出来请和我联系。

### 最后
**有用请给个STAR，欢迎Fork** 
